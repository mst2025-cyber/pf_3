<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akiba Maid Matcher ğŸ€</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #fff5f7; /* è–„ã„ãƒ”ãƒ³ã‚¯ */
        }
        .maid-gradient {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
        }
        .btn-primary {
            background-color: #ff4b4b;
            transition: all 0.2s;
        }
        .btn-primary:hover {
            background-color: #e03131;
            transform: translateY(-2px);
        }
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-gray-800 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between">
            <h1 class="text-2xl font-bold text-red-500 flex items-center gap-2">
                <span>ğŸ€</span> Akiba Maid Matcher
            </h1>
            <span class="text-xs font-bold bg-pink-100 text-pink-600 px-2 py-1 rounded-full">v1.0 JS Edition</span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container max-w-2xl mx-auto px-4 py-8">
        
        <!-- Intro Screen -->
        <div id="intro-screen" class="fade-in bg-white rounded-2xl p-8 card-shadow text-center">
            <div class="mb-6 text-6xl">ğŸ°</div>
            <h2 class="text-3xl font-bold mb-4 text-gray-800">ã‚ãªãŸã®ã€Œæ¨ã—åº—ã€è¦‹ã¤ã‘ã¾ã™</h2>
            <p class="text-gray-600 mb-8 leading-relaxed">
                ç°¡å˜ãª10å€‹ã®è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€ã‚ãªãŸã®å¥½ã¿ï¼ˆãƒ™ã‚¯ãƒˆãƒ«ï¼‰ã‚’è§£æã€‚<br>
                ç§‹è‘‰åŸã®æ•°ã‚ã‚‹ãƒ¡ã‚¤ãƒ‰ã‚«ãƒ•ã‚§ã®ä¸­ã‹ã‚‰ã€<br>
                ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒæœ€é©ãªä¸€è»’ã‚’ææ¡ˆã—ã¾ã™ã€‚
            </p>
            <div class="grid grid-cols-2 gap-4 text-left bg-pink-50 p-4 rounded-lg mb-8 text-sm">
                <div>âœ¨ é›°å›²æ°— (Energy)</div>
                <div>ğŸ¦„ ä¸–ç•Œè¦³ (Immersion)</div>
                <div>ğŸ’– èŒãˆåº¦ (Moe)</div>
                <div>ğŸ—£ï¸ è·é›¢æ„Ÿ (Interaction)</div>
                <div>ğŸ’° äºˆç®—æ„Ÿ (Cost)</div>
            </div>
            <button onclick="startQuiz()" class="btn-primary text-white font-bold py-4 px-12 rounded-full text-lg shadow-lg w-full md:w-auto">
                è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆï¼
            </button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden fade-in">
            <div class="mb-6 flex justify-between items-center">
                <span class="text-sm font-bold text-pink-500">QUESTION <span id="current-q-num">1</span>/10</span>
                <div class="w-1/2 bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-pink-500 h-2.5 rounded-full" style="width: 10%"></div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-6 md:p-8 card-shadow relative overflow-hidden">
                <div class="absolute top-0 left-0 w-2 h-full bg-pink-400"></div>
                <h3 id="question-text" class="text-xl md:text-2xl font-bold mb-8 text-gray-800 leading-snug">
                    è³ªå•ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                </h3>
                <div id="options-container" class="space-y-4">
                    <!-- Options will be injected here -->
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden fade-in space-y-8">
            <!-- Best Match Card -->
            <div class="bg-white rounded-2xl overflow-hidden card-shadow border-4 border-pink-200">
                <div class="bg-pink-50 p-4 text-center border-b border-pink-100">
                    <span class="text-pink-600 font-bold tracking-wider text-sm">ğŸ† BEST MATCH</span>
                </div>
                <div class="p-6 md:p-8 text-center">
                    <h2 id="result-name" class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">åº—èˆ—å</h2>
                    <p id="result-category" class="text-sm text-gray-500 mb-4 font-bold">ã‚«ãƒ†ã‚´ãƒªå</p>
                    
                    <div id="result-tags" class="flex flex-wrap justify-center gap-2 mb-6">
                        <!-- Tags -->
                    </div>

                    <p id="result-desc" class="text-gray-600 leading-relaxed mb-6 bg-gray-50 p-4 rounded-lg text-left">
                        èª¬æ˜æ–‡
                    </p>

                    <div class="flex items-center justify-center gap-2 mb-2">
                        <span class="text-gray-500 text-sm">ãƒãƒƒãƒãƒ³ã‚°åº¦</span>
                        <span id="result-score" class="text-3xl font-bold text-pink-500">98.5%</span>
                    </div>
                </div>
            </div>

            <!-- Chart & Details -->
            <div class="grid md:grid-cols-1 gap-6">
                <!-- Radar Chart -->
                <div class="bg-white rounded-2xl p-6 card-shadow">
                    <h3 class="font-bold text-gray-700 mb-4 text-center">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ†æ</h3>
                    <div class="relative h-64 w-full">
                        <canvas id="radarChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-gray-400 mt-2">èµ¤: ã‚ãªãŸã®å¸Œæœ› / é’: ãŠåº—ã®ç‰¹å¾´</p>
                </div>

                <!-- Other Candidates -->
                <div class="bg-white rounded-2xl p-6 card-shadow">
                    <h3 class="font-bold text-gray-700 mb-4">ãã®ä»–ã®å€™è£œ</h3>
                    <div id="other-candidates" class="space-y-4">
                        <!-- List items -->
                    </div>
                </div>
            </div>

            <div class="text-center pt-4 pb-12">
                <button onclick="location.reload()" class="text-gray-500 hover:text-pink-500 underline text-sm">
                    ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                </button>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white text-center py-4 text-xs">
        <p>&copy; 2024 Akiba Maid Matcher | Powered by JS & Tailwind</p>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // ==========================================
        // 1. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ (JSON)
        // ==========================================
        const shopsData = [
            {
                "id": 1, "name": "ã‚ã£ã¨ã»ã‰ï½ã‚€ã‚«ãƒ•ã‚§", "category": "ç‹é“ãƒ»ã‚¨ãƒ³ã‚¿ãƒ¡ç³»",
                "features": { "energy": 9, "immersion": 10, "moe": 10, "interaction": 9, "cost": 6 },
                "tags": ["ã‚¨ãƒ³ã‚¿ãƒ¡", "åˆå¿ƒè€…æ¨å¥¨", "ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰"],
                "description": "æŒ¨æ‹¶ã‚„ãŠã¾ã˜ãªã„ã®å£°ãŒéŸ¿ããƒ†ãƒ¼ãƒãƒ‘ãƒ¼ã‚¯ã®ã‚ˆã†ãªè³‘ã‚„ã‹ã•ã€‚ã€ŒèŒãˆã€ã®å…ƒç¥–ã«ã—ã¦å®Œæˆå½¢ã€‚"
            },
            {
                "id": 2, "name": "ã‚ã„ã©ã‚Šãƒ¼ã¿ã‚“", "category": "ç‹é“ãƒ»ã‚¨ãƒ³ã‚¿ãƒ¡ç³»",
                "features": { "energy": 10, "immersion": 9, "moe": 8, "interaction": 8, "cost": 7 },
                "tags": ["ãƒ©ã‚¤ãƒ–", "å…¥å›½ã‚·ã‚¹ãƒ†ãƒ ", "ä½“è‚²ä¼šç³»ãƒãƒª"],
                "description": "ãƒ©ã‚¤ãƒ–ã‚¹ãƒ†ãƒ¼ã‚¸ã§ç››ã‚Šä¸ŠãŒã‚‹å¤¢ã®å›½ã€‚å…ƒæ°—ã§æ˜ã‚‹ã„ã‚¢ã‚¤ãƒ‰ãƒ«çš„ãªèŒãˆè¦ç´ ãŒå¼·ã„ã€‚"
            },
            {
                "id": 3, "name": "ãƒãƒ¼ãƒˆã‚ªãƒ–ãƒãƒ¼ãƒ„", "category": "ç‹é“ãƒ»ã‚¨ãƒ³ã‚¿ãƒ¡ç³»",
                "features": { "energy": 10, "immersion": 7, "moe": 7, "interaction": 9, "cost": 6 },
                "tags": ["ãƒ©ã‚¤ãƒ–", "ãƒ²ã‚¿èŠ¸", "æ–‡åŒ–ç¥­ãƒãƒª"],
                "description": "ãƒ©ã‚¤ãƒ–é »åº¦ãŒé«˜ããƒ²ã‚¿èŠ¸ã‚‚æ‰“ã¦ã‚‹é«˜ã‚¨ãƒãƒ«ã‚®ãƒ¼ç©ºé–“ã€‚è¦ªã—ã¿ã‚„ã™ã„ã‚¯ãƒ©ã‚¹ãƒ¡ã‚¤ãƒˆçš„ãªå¯æ„›ã•ã€‚"
            },
            {
                "id": 4, "name": "ãƒã‚¸ã‚«ãƒ«ãƒ­ãƒªãƒãƒƒãƒ—", "category": "ç‹é“ãƒ»ã‚¨ãƒ³ã‚¿ãƒ¡ç³»",
                "features": { "energy": 8, "immersion": 8, "moe": 9, "interaction": 8, "cost": 7 },
                "tags": ["é­”æ³•å°‘å¥³", "ã‚†ã‚ã‹ã‚ã„ã„", "ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«é«˜"],
                "description": "é­”æ³•å°‘å¥³è¦‹ç¿’ã„è¨­å®šã¨ã‚†ã‚ã‹ã‚ã„ã„å†…è£…ã€‚THE ã‚¢ã‚­ãƒã®ã‚³ãƒ³ã‚«ãƒ•ã‚§å¬¢ã¨ã„ã†ã‚ªãƒ¼ãƒ©ã€‚"
            },
            {
                "id": 5, "name": "Cure Maid Cafe", "category": "ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ»ç™’ã—ãƒ»ç´…èŒ¶ç³»",
                "features": { "energy": 2, "immersion": 6, "moe": 2, "interaction": 2, "cost": 5 },
                "tags": ["ã‚¯ãƒ©ã‚·ã‚«ãƒ«", "ç´…èŒ¶å°‚é–€åº—", "é™å¯‚"],
                "description": "ã‚¯ãƒ©ã‚·ãƒƒã‚¯éŸ³æ¥½ãŒæµã‚Œã‚‹é™å¯‚ãªç©ºé–“ã€‚19ä¸–ç´€è‹±å›½ã®ã‚ˆã†ãªç©ºæ°—ãŒå®Œæˆã•ã‚Œã¦ã„ã‚‹ã€‚"
            },
            {
                "id": 6, "name": "ã´ãªãµã‰ã‚", "category": "ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ»ç™’ã—ãƒ»ç´…èŒ¶ç³»",
                "features": { "energy": 5, "immersion": 4, "moe": 6, "interaction": 6, "cost": 4 },
                "tags": ["ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ", "è€èˆ—", "ãƒ•ãƒ©ãƒ³ã‚¯"],
                "description": "å¸¸é€£ã¨ãƒ¡ã‚¤ãƒ‰ã®ç¬‘ã„å£°ãŒç¨‹ã‚ˆãèã“ãˆã‚‹ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ãªè€èˆ—ã€‚æ°—å–ã‚‰ãªã„å¯æ„›ã•ã€‚"
            },
            {
                "id": 7, "name": "ãƒ¡ã‚¤ãƒªãƒƒã‚·ãƒ¥", "category": "ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ»ç™’ã—ãƒ»ç´…èŒ¶ç³»",
                "features": { "energy": 3, "immersion": 7, "moe": 5, "interaction": 4, "cost": 5 },
                "tags": ["ãƒ†ã‚£ãƒ¼ã‚µãƒ­ãƒ³", "æ·‘å¥³", "è½ã¡ç€ã"],
                "description": "ã¾ã£ãŸã‚Šã¨ã—ãŸãƒ†ã‚£ãƒ¼ã‚µãƒ­ãƒ³ã€‚ã‚¯ãƒ©ã‚·ã‚«ãƒ«ãªåˆ¶æœã¨ç©ºé–“ãŒã€ç¾å®Ÿã«ã‚ã‚Šãã†ãªéæ—¥å¸¸ã‚’ä½œã‚‹ã€‚"
            },
            {
                "id": 11, "name": "ã‚¢ã‚­ãƒçµ¶å¯¾é ˜åŸŸ", "category": "ã‚¢ã‚­ãƒçµ¶å¯¾é ˜åŸŸã‚°ãƒ«ãƒ¼ãƒ—",
                "features": { "energy": 8, "immersion": 9, "moe": 10, "interaction": 8, "cost": 7 },
                "tags": ["ãƒ‹ãƒ¼ãƒã‚¤", "çŒ«è€³", "ç‹é“èŒãˆ"],
                "description": "ã€Œçµ¶å¯¾é ˜åŸŸï¼ãƒ‹ãƒ¼ãƒã‚¤ã€ã‚’å¼·èª¿ã—ã€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã¨èŒãˆä»•è‰ã«ç‰¹åŒ–ã—ãŸç‹é“ç³»ã€‚"
            },
            {
                "id": 15, "name": "ã‚¯ãƒ©ã‚¦ãƒ³ãƒ†ã‚£ã‚¢ãƒ©", "category": "TOYã‚°ãƒ«ãƒ¼ãƒ—",
                "features": { "energy": 7, "immersion": 10, "moe": 7, "interaction": 7, "cost": 8 },
                "tags": ["è±ªè¯å†…è£…", "ä¸–ç•Œè¦³", "å–¶æ¥­åŠ›"],
                "description": "ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ä¸¦ã¿ã«å†…è£…ã«ãŠé‡‘ã‚’ã‹ã‘ãŸè±ªè¯ç©ºé–“ã€‚ä¸–ç•Œè¦³ã®ä½äººã¨ã—ã¦ã®ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤ãŒå…‰ã‚‹ã€‚"
            },
            {
                "id": 19, "name": "å¤§äººãªã®ã«å¥³å…æœç€ã¦ã‚‹ã‚«ãƒ•ã‚§", "category": "å‹‡è€…ç³»åˆ—",
                "features": { "energy": 8, "immersion": 9, "moe": 10, "interaction": 9, "cost": 7 },
                "tags": ["å¦¹å±æ€§", "ãŠå…„ã¡ã‚ƒã‚“", "ãƒ‘ã‚¹ãƒ†ãƒ«"],
                "description": "ã€ŒãŠå…„ã¡ã‚ƒã‚“ã€ã¨å‘¼ã°ã‚Œç¶šã‘ã‚‹ã“ã¨ã§è„³ãŒãƒã‚°ã‚‹æ²¡å…¥æ„Ÿã€‚å¦¹å±æ€§ã«ç‰¹åŒ–ã—ãŸèŒãˆã€‚"
            },
            {
                "id": 20, "name": "é¾é¾ (ãƒ­ãƒ³ãƒ­ãƒ³)", "category": "å‹‡è€…ç³»åˆ—",
                "features": { "energy": 6, "immersion": 8, "moe": 7, "interaction": 7, "cost": 6 },
                "tags": ["ã‚­ãƒ§ãƒ³ã‚·ãƒ¼", "ä¸­è¯", "ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼"],
                "description": "æ€ªã—ã’ãªä¸­è¯BGMã¨ãŠæœ­ã®ä¸–ç•Œè¦³ã€‚ãƒãƒ£ã‚¤ãƒŠå¨˜çš„ãªå¯æ„›ã•ã¨å°‘ã—ã®æ¯’ã£æ°—ã€‚"
            },
            {
                "id": 21, "name": "Blue Egg", "category": "å‹‡è€…ç³»åˆ—",
                "features": { "energy": 5, "immersion": 9, "moe": 8, "interaction": 6, "cost": 6 },
                "tags": ["é­”æ³•å­¦æ ¡", "æ¸…æ¥š", "ä¸Šå“"],
                "description": "æ¸…æ¥šã§ä¸Šå“ãªç©ºæ°—ãŒæ¼‚ã†é­”æ³•å­¦æ ¡ã®å¯®ã€‚ç‹é“ãƒ¡ã‚¤ãƒ‰ã®é€²åŒ–ç³»ã€æ¸…æ¥šèŒãˆã®æœ€é«˜å³°ã€‚"
            },
            {
                "id": 24, "name": "ãƒ–ãƒ©ãƒƒã‚¯ãƒ­ãƒ³ãƒ‰", "category": "ãƒ€ãƒ¼ã‚¯ãƒ»ã‚´ã‚·ãƒƒã‚¯",
                "features": { "energy": 5, "immersion": 9, "moe": 7, "interaction": 9, "cost": 7 },
                "tags": ["æ­»ç¥", "ç—…ã¿ã‹ã‚", "æ¥è§¦ãƒã‚§ã‚­"],
                "description": "æ­»ç¥ã®ä¸–ç•Œè¦³ã§çµ±ä¸€ã•ã‚ŒãŸæš—ã„ç©ºé–“ã€‚ç—…ã¿ã‹ã‚ã„ã„ã€Sã£æ°—ãªã©å¤‰åŒ–çƒã®èŒãˆã€‚"
            },
            {
                "id": 28, "name": "LittleTGV", "category": "é‰„é“ãƒ»ç‰¹æ®Šç³»",
                "features": { "energy": 6, "immersion": 7, "moe": 3, "interaction": 5, "cost": 4 },
                "tags": ["é‰„é“", "é‰„ã‚ªã‚¿", "å®¶æ—é€£ã‚Œå¯"],
                "description": "æœ¬ç‰©ã®é‰„é“éƒ¨å“ãŒã‚ã‚‹åº—å†…ã€‚èŒãˆæ¼”æŠ€ã‚ˆã‚Šé‰„é“çŸ¥è­˜ãŒæ­¦å™¨ã®ä¹—å‹™å“¡ãŒæ¥å®¢ã€‚"
            },
            {
                "id": 29,
                "name": "ã‚¶ãƒ»ã‚°ãƒ©ãƒ³ãƒ´ã‚¡ãƒ‹ã‚¢",
                "category": "é£Ÿäº‹ãƒ»ãŠé…’",
                "features": { "energy": 6, "immersion": 6, "moe": 3, "interaction": 3, "cost": 4 },
                "tags": ["RPGé…’å ´", "é£¯ãŒæ—¨ã„", "ã‚³ã‚¹ãƒ‘è‰¯"],
                "description": "RPGã®é…’å ´é¢¨ã ãŒå®¢å±¤ã¯ãƒªã‚¢ãƒ«ã€‚éœ²å‡ºã¯é«˜ã„ãŒæ¥å®¢ã¯ã‚µãƒã‚µãƒã—ãŸã‚¦ã‚§ã‚¤ãƒˆãƒ¬ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ã€‚"
            },
             {
                "id": 33, "name": "ã‚¢ã‚­ãƒã‚®ãƒ«ãƒ‰", "category": "é£Ÿäº‹ãƒ»ãŠé…’ãƒ»ç‰¹æ®Šç³»",
                "features": { "energy": 7, "immersion": 8, "moe": 5, "interaction": 10, "cost": 7 },
                "tags": ["ã‚«ã‚¸ãƒ", "ãƒãƒ¼ã‚«ãƒ¼", "ä¼šè©±å¤š"],
                "description": "ã‚«ã‚¸ãƒãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸¦ã¶éæ—¥å¸¸ç©ºé–“ã€‚ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ä¸­ã¯å¸¸ã«ä¼šè©±ãŒç™ºç”Ÿã—ç››ã‚Šä¸ŠãŒã‚‹ã€‚"
            },
            {
                "id": 35, "name": "MeltTune", "category": "æ³¨ç›®åº—",
                "features": { "energy": 8, "immersion": 8, "moe": 8, "interaction": 7, "cost": 8 },
                "tags": ["æ˜ ãˆ", "è©±é¡Œåº—", "æ´—ç·´"],
                "description": "è¡£è£…ã‚„å†…è£…ã®ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚¹åŠ›ãŒå¼·ãæ˜ ãˆã‚‹è©±é¡Œåº—ã€‚ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«æ¡ç”¨åŸºæº–ãŒé«˜ã„ã€‚"
            },
             {
                "id": 36, "name": "Lilliel (ãƒªãƒªã‚¨ãƒ«)", "category": "æ³¨ç›®åº—",
                "features": { "energy": 4, "immersion": 8, "moe": 9, "interaction": 6, "cost": 7 },
                "tags": ["å¤©ä½¿", "é€æ˜æ„Ÿ", "æ¸…æ¥š"],
                "description": "ç™½ã‚’åŸºèª¿ã¨ã—ãŸå¤©ä½¿ç•Œã®è¨­å®šã€‚å„šã’ãªå¯æ„›ã•ã¨ç™’ã—é‡è¦–ã®ã‚½ãƒ•ãƒˆãªæ¥å®¢ã€‚"
            }
        ];

        // ==========================================
        // 2. è³ªå•ãƒ­ã‚¸ãƒƒã‚¯ (Array of Objects)
        // ==========================================
        const questions = [
            {
                q: "Q1. ä»Šæ—¥ã®æ°—åˆ†ã®ã€Œãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã€ã¯ï¼Ÿ",
                options: [
                    { text: "é™ã‹ã«ã¾ã£ãŸã‚Šéã”ã—ãŸã„", val: { energy: -2, interaction: -1 } },
                    { text: "æ™®é€šãƒ»ãƒ•ãƒ©ãƒƒãƒˆãªæ°—åˆ†", val: {} },
                    { text: "ãƒ¯ã‚¤ãƒ¯ã‚¤ç››ã‚Šä¸ŠãŒã‚ŠãŸã„ï¼", val: { energy: 2, interaction: 1 } }
                ]
            },
            {
                q: "Q2. ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã®ã€Œè¡£è£…ã€ã®å¥½ã¿ã¯ï¼Ÿ",
                options: [
                    { text: "ãƒ­ãƒ³ã‚°ã‚¹ã‚«ãƒ¼ãƒˆã§ã‚¯ãƒ©ã‚·ã‚«ãƒ«ï¼ˆä¸Šå“ï¼‰", val: { moe: -2, immersion: -1 } },
                    { text: "è†ä¸ˆã§æ´»å‹•çš„ãªãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ«", val: { moe: 1 } },
                    { text: "ãƒ•ãƒªãƒ•ãƒªãƒ»ãƒ‘ã‚¹ãƒ†ãƒ«ãƒ»ã‚¢ã‚¤ãƒ‰ãƒ«é¢¨", val: { moe: 2, immersion: 1 } }
                ]
            },
            {
                q: "Q3. ã€Œé­”æ³•ã€ã‚„ã€ŒãŠã¾ã˜ãªã„ã€ã«ã¤ã„ã¦ã©ã†æ€ã†ï¼Ÿ",
                options: [
                    { text: "æ­£ç›´ã€æ¥ãšã‹ã—ã„ã®ã§ãƒŠã‚·ã§â€¦", val: { immersion: -3, energy: -1 } },
                    { text: "éƒ·ã«å…¥ã£ã¦ã¯éƒ·ã«å¾“ã†", val: { immersion: 1, energy: 1 } },
                    { text: "å…¨åŠ›ã§ã€ŒãŠã„ã—ããªãƒ¼ã‚Œï¼ã€ã—ãŸã„", val: { immersion: 3, energy: 2 } }
                ]
            },
            {
                q: "Q4. ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã¨ã®ã€Œä¼šè©±ã€ã®ã‚¹ã‚¿ãƒ³ã‚¹ã¯ï¼Ÿ",
                options: [
                    { text: "åŸºæœ¬ã¯æ”¾ç½®ã—ã¦ã»ã—ã„", val: { interaction: -3 } },
                    { text: "æ³¨æ–‡ã‚„æä¾›ã®æ™‚ã«å°‘ã—è©±ã™ãã‚‰ã„", val: { interaction: 0 } },
                    { text: "å‹é”ã¿ãŸã„ã«ã‚¬ãƒƒãƒ„ãƒªè©±ã—ãŸã„", val: { interaction: 3 } }
                ]
            },
            {
                q: "Q5. æ¥å®¢ã•ã‚Œã‚‹ãªã‚‰ã€ã©ã£ã¡ã®ã‚¿ã‚¤ãƒ—ãŒå¥½ãï¼Ÿ",
                options: [
                    { text: "å¦¹ç³»ãƒ»ãƒ‰ã‚¸ã£å­ãƒ»å…ƒæ°—ã£å­ï¼ˆã‚¿ãƒ¡å£ï¼‰", val: { moe: 2, interaction: 1 } },
                    { text: "ãŠå§‰ã•ã‚“ãƒ»ã‚¯ãƒ¼ãƒ«ãƒ»å¿ å®Ÿãªä½¿ç”¨äººï¼ˆæ•¬èªï¼‰", val: { moe: -2, interaction: -1 } }
                ]
            },
            {
                q: "Q6. ãŠåº—è‡ªä½“ã®ã€Œä¸–ç•Œè¦³ï¼ˆè¨­å®šï¼‰ã€ã¯ï¼Ÿ",
                options: [
                    { text: "æ™®é€šã®ã‚«ãƒ•ã‚§ã‚„å±…é…’å±‹ã«è¿‘ã„æ–¹ãŒè½ã¡ç€ã", val: { immersion: -3 } },
                    { text: "ã¡ã‚‡ã£ã¨ã—ãŸã‚³ãƒ³ã‚»ãƒ—ãƒˆãŒã‚ã‚‹ãã‚‰ã„", val: { immersion: 0 } },
                    { text: "å®‡å®™ãƒ»æµ·è³Šãƒ»ç—…é™¢â€¦å¾¹åº•çš„ã«ä½œã‚Šè¾¼ã‚“ã§ã»ã—ã„", val: { immersion: 3 } }
                ]
            },
            {
                q: "Q7. ä»Šæ—¥ã®ã€Œäºˆç®—ã€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ï¼Ÿ",
                options: [
                    { text: "1,000å††ã€œ2,000å††ã§ã‚µã‚¯ãƒƒã¨", val: { cost: -3 } },
                    { text: "2,000å††ã€œ4,000å††ï¼ˆé£Ÿäº‹ï¼‹ãƒã‚§ã‚­ãªã©ï¼‰", val: { cost: 0 } },
                    { text: "é‡‘é¡ã¯æ°—ã«ã—ãªã„ã€æ¥½ã—ã‘ã‚Œã°OK", val: { cost: 3 } }
                ]
            },
            {
                q: "Q8. æ–™ç†ã‚„ãƒ‰ãƒªãƒ³ã‚¯ã«æ±‚ã‚ã‚‹ã‚‚ã®ã¯ï¼Ÿ",
                options: [
                    { text: "å‘³ã¨ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ˆæ™®é€šã®é£Ÿäº‹ãŒã—ãŸã„ï¼‰", val: { immersion: -2, cost: -1 } },
                    { text: "ãŠçµµã‹ãã‚ªãƒ ãƒ©ã‚¤ã‚¹ã‚„ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚«ã‚¯ãƒ†ãƒ«ï¼ˆæ˜ ãˆé‡è¦–ï¼‰", val: { immersion: 2, cost: 1 } }
                ]
            },
            {
                q: "Q9. åº—å†…ã®ã€ŒéŸ³ï¼ˆBGMï¼‰ã€ã®è¨±å®¹åº¦ã¯ï¼Ÿ",
                options: [
                    { text: "è½ã¡ç€ã„ãŸBGMãŒè‰¯ã„", val: { energy: -2 } },
                    { text: "ã‚¢ãƒ‹ã‚½ãƒ³ã‚„J-POPãŒæµã‚Œã¦ã„ã‚‹ãã‚‰ã„", val: { energy: 0 } },
                    { text: "ãƒã‚¤ã‚¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„ãƒ©ã‚¤ãƒ–ã‚¹ãƒ†ãƒ¼ã‚¸æ­“è¿", val: { energy: 3 } }
                ]
            },
            {
                q: "Q10. æœ€å¾Œã«ã€ä»Šå›ã®ã€Œä¸€ç•ªã®ç›®çš„ã€ã¯ï¼Ÿ",
                options: [
                    { text: "ã€Œç™’ã‚„ã—ã€ã¨ã€Œä¼‘æ¯ã€", val: { energy: -2, interaction: -1 } },
                    { text: "ã€Œéæ—¥å¸¸ä½“é¨“ã€ã¨ã€ŒèŒãˆã€", val: { immersion: 2, moe: 2 } },
                    { text: "ã‚­ãƒ£ã‚¹ãƒˆã‚„ä»–ã®ãŠå®¢ã•ã‚“ã¨ã®ã€Œäº¤æµã€", val: { interaction: 3, energy: 1 } }
                ]
            }
        ];

        // ==========================================
        // 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†
        // ==========================================
        let currentQuestionIndex = 0;
        let userVector = { energy: 5, immersion: 5, moe: 5, interaction: 5, cost: 5 };
        const categories = ["energy", "immersion", "moe", "interaction", "cost"];
        const categoriesLabel = ["Energy", "Immersion", "Moe", "Interaction", "Cost"];

        // DOMè¦ç´ 
        const introScreen = document.getElementById('intro-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress-bar');
        const currentQNum = document.getElementById('current-q-num');

        // ã‚¹ã‚¿ãƒ¼ãƒˆå‡¦ç†
        function startQuiz() {
            introScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            renderQuestion();
        }

        // è³ªå•æç”»
        function renderQuestion() {
            const q = questions[currentQuestionIndex];
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¯ãƒ©ã‚¹ã®ãƒªã‚»ãƒƒãƒˆ
            questionText.classList.remove('fade-in');
            optionsContainer.classList.remove('fade-in');
            void questionText.offsetWidth; // trigger reflow
            questionText.classList.add('fade-in');
            optionsContainer.classList.add('fade-in');

            questionText.textContent = q.q;
            currentQNum.textContent = currentQuestionIndex + 1;
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
            const progressPercent = ((currentQuestionIndex) / questions.length) * 100;
            progressBar.style.width = `${progressPercent}%`;

            // é¸æŠè‚¢ç”Ÿæˆ
            optionsContainer.innerHTML = '';
            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded-xl border-2 border-pink-100 hover:border-pink-400 hover:bg-pink-50 transition-all font-medium text-gray-700 active:scale-95";
                btn.textContent = opt.text;
                btn.onclick = () => handleAnswer(opt.val);
                optionsContainer.appendChild(btn);
            });
        }

        // å›ç­”å‡¦ç†
        function handleAnswer(scoreChange) {
            // ã‚¹ã‚³ã‚¢åŠ ç®—
            for (let key in scoreChange) {
                if (userVector.hasOwnProperty(key)) {
                    userVector[key] += scoreChange[key];
                }
            }

            // æ¬¡ã¸é€²ã‚€
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                renderQuestion();
            } else {
                finishQuiz();
            }
        }

        // å®Œäº†ãƒ»é›†è¨ˆå‡¦ç†
        function finishQuiz() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            // ãƒ™ã‚¯ãƒˆãƒ«ã®ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚° (1-10)
            for (let key in userVector) {
                userVector[key] = Math.max(1, Math.min(10, userVector[key]));
            }

            // ãƒãƒƒãƒãƒ³ã‚°è¨ˆç®—
            const results = shopsData.map(shop => {
                let sumSqDiff = 0;
                categories.forEach(cat => {
                    sumSqDiff += Math.pow(userVector[cat] - shop.features[cat], 2);
                });
                const distance = Math.sqrt(sumSqDiff);
                // ç°¡æ˜“ã‚¹ã‚³ã‚¢è¨ˆç®—: æœ€å¤§è·é›¢(ç´„20)ã‹ã‚‰ã®é€†ç®—
                const similarity = Math.max(0, 100 - (distance * 6));
                return { ...shop, distance, similarity };
            });

            // ã‚½ãƒ¼ãƒˆ
            results.sort((a, b) => b.similarity - a.similarity);
            const best = results[0];

            // UIåæ˜ : ãƒ™ã‚¹ãƒˆãƒãƒƒãƒ
            document.getElementById('result-name').textContent = best.name;
            document.getElementById('result-category').textContent = best.category;
            document.getElementById('result-desc').textContent = best.description;
            document.getElementById('result-score').textContent = best.similarity.toFixed(1) + "%";

            // ã‚¿ã‚°ç”Ÿæˆ
            const tagsDiv = document.getElementById('result-tags');
            tagsDiv.innerHTML = best.tags.map(tag => 
                `<span class="bg-pink-100 text-pink-600 px-3 py-1 rounded-full text-xs font-bold">#${tag}</span>`
            ).join('');

            // ãã®ä»–å€™è£œç”Ÿæˆ
            const othersDiv = document.getElementById('other-candidates');
            othersDiv.innerHTML = results.slice(1, 4).map((shop, idx) => `
                <div class="border-b border-gray-100 pb-3 last:border-0">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-gray-700">${idx+2}. ${shop.name}</span>
                        <span class="text-sm text-pink-500 font-bold">${shop.similarity.toFixed(1)}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-1.5 mb-2">
                        <div class="bg-pink-400 h-1.5 rounded-full" style="width: ${shop.similarity}%"></div>
                    </div>
                    <p class="text-xs text-gray-500 truncate">${shop.description}</p>
                </div>
            `).join('');

            // ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæç”»
            drawChart(best);
        }

        // ãƒãƒ£ãƒ¼ãƒˆæç”» (Chart.js)
        function drawChart(bestShop) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®é…åˆ—åŒ–
            const userData = categories.map(c => userVector[c]);
            // åº—èˆ—ãƒ‡ãƒ¼ã‚¿ã®é…åˆ—åŒ–
            const shopData = categories.map(c => bestShop.features[c]);

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: categoriesLabel,
                    datasets: [{
                        label: 'ã‚ãªãŸã®å¸Œæœ›',
                        data: userData,
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(255, 99, 132, 1)'
                    }, {
                        label: bestShop.name,
                        data: shopData,
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(54, 162, 235, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            min: 0,
                            max: 10,
                            ticks: { stepSize: 2, display: false },
                            pointLabels: {
                                font: { size: 12, family: "'M PLUS Rounded 1c', sans-serif" }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }
    </script>
</body>
</html>